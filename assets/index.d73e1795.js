var O=Object.defineProperty,j=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var B=(l,t,e)=>t in l?O(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,b=(l,t)=>{for(var e in t||(t={}))R.call(t,e)&&B(l,e,t[e]);if(I)for(var e of I(t))z.call(t,e)&&B(l,e,t[e]);return l},$=(l,t)=>j(l,P(t));var w=(l,t,e)=>(B(l,typeof t!="symbol"?t+"":t,e),e);import{e as K,d as A,r as h,c as X,a as Y,o as f,b as _,f as D,g as k,n as C,u as g,t as G,w as E,F as T,h as q,i as N,j as J,k as Q,l as U,m as W,p as Z,q as ee,s as te,v as ne}from"./vendor.76f03eed.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}};oe();const F=new K;var L=(l,t)=>{const e=l.__vccOpts||l;for(const[o,r]of t)e[o]=r;return e};const re={key:0,role:"presentation",class:"tree-node__background"},le={key:0},ue=["id","value"],se={key:1,role:"group",ref:"group",class:"tree-node__children"},ae={name:"VTreeItem"},de=A($(b({},ae),{props:{data:{type:null,required:!0},menu:{type:null,required:!0}},emits:[""],setup(l,{emit:t}){const e=l,o=h({}),r=h({}),s=X(()=>e.data.children);function d(m,n){n.opended=!n.opended,J(n,o.value)||(n.selected=!n.selected,r.value=n,Q(o.value)&&(o.value.selected=!1),o.value=n),e.menu.hiddenMenu(m),F.emit("toggleSelectBar",m,n.selected?"block":"none")}function M(m){F.emit("contextMenu",m,r.value)}function y(m,n){const u=m.srcElement.value||"";n.text=u}function v(m,n){n.rename=!n.rename}return(m,n)=>{var a,i,c,x;const u=Y("tree-item",!0);return e.data.delete?D("v-if",!0):(f(),_("li",{key:0,class:C(["tree-node",{"is-opend":(a=e.data)==null?void 0:a.opended,"is-close":!((i=e.data)==null?void 0:i.opended)}]),role:"treeitem",onClick:n[4]||(n[4]=E(p=>d(p,e.data),["stop"])),onMouseover:n[5]||(n[5]=E(p=>e.data.isHover=!e.data.isHover,["stop"])),onMouseout:n[6]||(n[6]=E(p=>e.data.isHover=!e.data.isHover,["stop"])),onContextmenu:n[7]||(n[7]=E(p=>M(p),["stop"]))},[e.data.isHover?(f(),_("div",re)):D("v-if",!0),k("i",{class:C({"tree-anchor":g(s),"tree-node__icon":g(s)}),role:"presentation"},null,2),k("div",{class:C({"tree-anchor":!0,"tree-selected":(c=e.data)==null?void 0:c.selected})},[k("i",{class:C(["tree-node__icon",{"no-filder":!g(s)}]),role:"presentation"},null,2),l.data.rename?(f(),_("input",{key:1,id:e.data.id+"",class:"tree-node__input",type:"text",value:l.data.text,onInput:n[0]||(n[0]=p=>y(p,e.data)),onBlur:n[1]||(n[1]=p=>v(p,e.data)),onClick:n[2]||(n[2]=E(p=>{},["stop"]))},null,40,ue)):(f(),_("span",le,G(l.data.text),1))],2),g(s)?(f(),_("ul",se,[(f(!0),_(T,null,q((x=e.data)==null?void 0:x.children,(p,H)=>(f(),N(u,{key:H,data:p,menu:e.menu,onIconClick:n[3]||(n[3]=ye=>e.data.opended=!e.data.opended)},null,8,["data","menu"]))),128))],512)):D("v-if",!0)],34))}}}));var ie=L(de,[["__scopeId","data-v-cafc79fc"]]);class ce{constructor(t){w(this,"fileMenu");w(this,"folderMenu");this.fileMenu=this.createMenu(t,"file"),this.folderMenu=this.createMenu(t,"folder")}createMenu(t,e){const o=document.createElement("ul"),r=document.querySelector("body");o.classList.add("tree-custom-menu");for(let s of t)if(s.type===e||s.type==="all"){const d=document.createElement("li");d.textContent=s.name,d.onclick=s.onClick,o.appendChild(d)}return r.appendChild(o),o}showMenu(t,e){let o={};e==="floder"&&(o=this.folderMenu),e==="file"&&(o=this.fileMenu),o.style.top=`${t.clientY}px`,o.style.left=`${t.clientX}px`,o.style.display="block"}hiddenMenu(t){const e=this.folderMenu,o=this.fileMenu;e.style.display="none",o.style.display="none"}}function S(l){const t=[],e=[];for(let o=0;o<l.length;o++){const r=l[o];r.children?e.push(r):t.push(r)}return[...e,...t]}const pe={role:"tree"},fe={role:"group",class:"tree"},me={name:"VTree"},ve=A($(b({},me),{props:{data:{type:Array,required:!0},highlightCurrent:{type:Boolean,required:!1},defaultExpandAll:{type:Boolean,required:!1}},setup(l){const t=l;U(u=>({"24dbbcae-selectBarDisplay":r.value,"24dbbcae-selectBarTop":o.value}));let e=1;const o=h(0),r=h("none"),s=h([]),d=h({});function M(u,a){const i=u.map(c=>({id:e++,anchorID:a,text:c.text||"\u672A\u77E5\u6587\u4EF6",opended:t.defaultExpandAll||c.opended||!1,selected:c.selected||!1,children:c.children?M(c.children,`${a}-${e-1}`):void 0,rename:c.rename||!1}));return S(i)}W(()=>t.data,u=>{const a=u.map(i=>({id:e++,text:i.text||"\u672A\u77E5\u6587\u4EF6",opended:t.defaultExpandAll||i.opended||!1,selected:i.selected||!1,children:i.children?M(i.children,`${e-1}`):void 0,rename:i.rename||!1}));s.value=S(a)},{deep:!0,immediate:!0});function y(u){ee(()=>{const a=document.getElementById(`${u}`);a==null||a.focus()})}const v=new ce([{name:"\u65B0\u5EFA\u76EE\u5F55",type:"folder",onClick:function(u){var c;const a={id:e++,text:"\u672A\u77E5\u6587\u4EF6",opended:!1,selected:!1,children:[],rename:!0};v.hiddenMenu(u);const i=Z(d.value.children,x=>!x.children);(c=d.value.children)==null||c.splice(i,0,a),y(a.id)}},{name:"\u65B0\u5EFA\u6587\u4EF6",type:"folder",onClick:function(u){var i;const a={id:e++,text:"\u672A\u77E5\u6587\u4EF6",opended:!1,selected:!1,rename:!0};v.hiddenMenu(u),(i=d.value.children)==null||i.push(a),y(a.id)}},{name:"\u91CD\u547D\u540D",type:"all",onClick:function(u){v.hiddenMenu(u),d.value.rename=!d.value.rename,y(d.value.id)}},{name:"\u5220\u9664",type:"all",onClick:function(u){v.hiddenMenu(u),d.value.delete=!d.value.delete}}]);function m(u,a){u.preventDefault(),d.value=a,a.children?v.showMenu(u,"floder"):v.showMenu(u,"file")}function n(u,a){o.value=u.target.offsetTop,r.value=a}return F.on("contextMenu",m),t.highlightCurrent&&F.on("toggleSelectBar",n),(u,a)=>(f(),_("div",pe,[k("ul",fe,[(f(!0),_(T,null,q(s.value,(i,c)=>(f(),N(ie,{key:c,data:i,menu:g(v)},null,8,["data","menu"]))),128))])]))}}));var V=L(ve,[["__scopeId","data-v-24dbbcae"]]);const _e={style:{width:"100%",border:"1px solid #eee"}},he=A({setup(l){const t=h([{text:"\u6587\u4EF6",children:[{text:"\u6587\u4EF61",children:[{text:"\u6587\u4EF61"},{text:"\u6587\u672C3",children:[{text:"\u6587\u4EF61"},{text:"\u6587\u672C3"}]}]},{text:"\u6587\u4EF63"},{text:"\u6587\u4EF63"}]},{text:"\u6587\u4EF6",children:[{text:"\u6587\u4EF61",children:[{text:"\u6587\u4EF61"}]}]},{text:"\u6587\u4EF6"},{text:"\u6587\u4EF6",children:[]}]);return console.log(V.name),(e,o)=>(f(),_("div",_e,[te(V,{data:t.value,"highlight-current":"","default-expand-all":""},null,8,["data"])]))}});ne(he).mount("#app");
